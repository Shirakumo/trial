<!DOCTYPE html><html><head><title>Trial / Physically Based Rendering Model</title><meta property="og:image" content="https://repository-images.githubusercontent.com/54314855/81c55af6-b2c4-45f0-b66d-f29fdd37be7f"><meta property="og:image:alt" content="Trial provides a standard renderer that implements a Physically Based Rendering shading model and associated material. To use it, simply enter a pbr-render-pass and ensure your objects provide a pbr-material, or some appropriate conversion exists."><meta property="og:type" content="object"><meta property="og:title" content="Trial / Physically Based Rendering Model"><meta property="og:url" content="https://shirakumo.org/docs/trial/pbr.mess.html"><meta property="og:description" content="Trial provides a standard renderer that implements a Physically Based Rendering shading model and associated material. To use it, simply enter a pbr-render-pass and ensure your objects provide a pbr-material, or some appropriate conversion exists."></head><body><article><a class="index" href="index.html">Index</a><style>article{max-width:800px;font-size:12pt;font-family:sans-serif;margin:0 auto 3em auto;}article h1{text-align:center;font-size:2em;}article img{margin:0 auto;max-width:100%;}article blockquote{border-left:0.2em solid gray;margin-left:1em;padding-left:1em;}article figcaption{padding:0.2em 1em;background:#E0E0E0;}article code{background:#F0F0F0;padding:0 0.1em;}article .code-block{padding:0.1em 0.5em;overflow-x:auto;}article a.index{display:block;text-decoration:none;text-align:center;font-size:1.1em;background:#151515;border:2px solid #151515;color:#FEFEFE;}article a.index:hover{background:#FEFEFE;color:#151515;}</style><h1 id="physically based rendering model">Physically Based Rendering Model</h1><p>Trial provides a <a class="external-link" href="standard-renderer.html">standard renderer</a> that implements a Physically Based Rendering shading model and associated material. To use it, simply enter a <code>pbr-render-pass</code> and ensure your objects provide a <code>pbr-material</code>, or some appropriate conversion exists.</p><p>The model uses a Cook-Torrance BRDF to implement the shading behaviour, and it is recommended to use it in combination with an HDR pipeline.</p><h2 id="material properties">Material Properties</h2><p>Each material has the following properties:</p><ul><li><p>Albedo<br>This is put together through the <code>albedo-texture</code> and the <code>albedo-factor</code>, both of which are 4-component. The alpha component allows you to make semi-transparent materials.</p></li><li><p>Metalness, Roughness, Ambient Occlusion<br>This is put together through the <code>metal-rough-occlusion-texture</code> and the <code>metalness-factor</code>, <code>roughness-factor</code> and <code>occlusion-factor</code>. You may also specify the textures individually through the <code>metal-rough-texture</code> or <code>metalness-texture</code>, <code>roughness-texture</code>, and <code>occlusion-texture</code>. If you specify them individually, they will be merged manually before upload, which may be expensive.</p></li><li><p>Emission<br>The <code>emission-texture</code> and <code>emission-factor</code> allow you to create materials that appear to emit light. In practise this will just cause the material to be very bright, causing bloom to take hold. This only works in combination with an HDR pipeline.  </p></li><li><p>Normal<br>The <code>normal-texture</code> provides the standard normal mapping behaviour.</p></li><li><p>Alpha-Cutoff<br>The <code>alpha-cutoff</code> designates a threshold below which the material is considered fully transparent.</p></li></ul><figure><a href="images/pbr-1.png" target="_blank"><img alt="images/pbr-1.png" src="images/pbr-1.png" style="display:block;"></a><figcaption>Metalness increases towards the top, roughness towards the right</figcaption></figure><h2 id="image based lighting">Image Based Lighting</h2><p>The PBR renderer supports an image based lighting workflow. For this purpose it provides a special light type, the <code>environment-light</code>. The light requires an <a class="external-link" href="environment-maps.html"><code>environment-map</code></a> instance as the <code>:asset</code> initarg, which it uses to get the needed irradiance and prefiltered environment maps.</p><p>When the light is active in the scene it will provide ambient lighting for all objects based on the environment map. You can optionally control for its strength via the light's <code>color</code>, which simply acts as a multiplier.</p><figure><a href="images/ibl-1.png" target="_blank"><img alt="images/ibl-1.png" src="images/ibl-1.png" style="display:block;"></a></figure><figure><a href="images/ibl-2.png" target="_blank"><img alt="images/ibl-2.png" src="images/ibl-2.png" style="display:block;"></a></figure><h2 id="tone mapping">Tone Mapping</h2><p>By default the PBR renderer outputs colour in high dynamic range. This will make it look odd, unless you tone map the colours back into low dynamic range. To do so, you should add an instance of a <code>tone-mapping-pass</code> subclass and connect it to the <code>color</code> output of the PBR pass. The following tone mappers are implemented:</p><ul><li><p><code>hable</code><br>Accepts the following tuning parameters:</p><ul><li><p><code>shoulder-strength</code></p></li><li><p><code>linear-strength</code></p></li><li><p><code>linear-angle</code></p></li><li><p><code>toe-strength</code></p></li><li><p><code>toe-numerator</code></p></li><li><p><code>toe-denominator</code></p></li><li><p><code>linear-white-point</code></p></li><li><p><code>exposure-bias</code></p></li></ul></li><li><p><code>hill-aces</code></p></li><li><p><code>narkowicz-aces</code></p></li><li><p><code>reinhard</code></p></li><li><p><code>reinhard-extended</code><br>Accepts the following tuning parameters:</p><ul><li><p><code>c-white</code></p></li></ul></li><li><p><code>schlick</code><br>Accepts the following tuning parameters:</p><ul><li><p><code>p</code></p></li><li><p><code>hi-val</code></p></li></ul></li><li><p><code>tumblin-rushmeier</code><br>Accepts the following tuning parameters:</p><ul><li><p><code>luminance-map</code><br>This should be connected to a <code>luminance-pass</code>' output, with the luminance-pass' input being the same as the input to this pass.</p></li><li><p><code>ld-max</code></p></li><li><p><code>c-max</code></p></li></ul></li><li><p><code>uchimura</code><br>Accepts the following tuning parameters:</p><ul><li><p><code>max-brightness</code></p></li><li><p><code>contrast</code></p></li><li><p><code>linear-start</code></p></li><li><p><code>linear-length</code></p></li><li><p><code>black-tightness-shape</code></p></li><li><p><code>black-tightness-offset</code></p></li></ul></li><li><p><code>ward</code><br>Accepts the following tuning parameters:</p><ul><li><p><code>ld-max</code></p></li></ul></li></ul><p>All tone mappers also include a <code>gamma</code> factor that should be adjusted according to the user's screen.</p></article></body></html>
<!DOCTYPE html><html><head><title>Trial / Mass-Aggregate Physics Simulations</title><meta property="og:image" content="https://repository-images.githubusercontent.com/54314855/81c55af6-b2c4-45f0-b66d-f29fdd37be7f"><meta property="og:image:alt" content="Mass-Aggregate, or also known as Particle or Verlet Physics are systems that govern a set of point particles, each with a specific mass. The particles then interact with each other through force generators."><meta property="og:type" content="object"><meta property="og:title" content="Trial / Mass-Aggregate Physics Simulations"><meta property="og:url" content="https://shirakumo.org/docs/trial/mass-aggregate.mess.html"><meta property="og:description" content="Mass-Aggregate, or also known as Particle or Verlet Physics are systems that govern a set of point particles, each with a specific mass. The particles then interact with each other through force generators."></head><body><article><a class="index" href="index.html">Index</a><style>article{
    max-width: 800px;
    font-size: 12pt;
    font-family: sans-serif;
    margin: 0 auto 3em auto;
}

article h1{
    text-align: center;
    font-size: 2em;
}

article img{
    margin: 0 auto;
    max-width: 100%;
}

article blockquote{
    border-left: 0.2em solid gray;
    margin-left: 1em;
    padding-left: 1em;
}

article figcaption{
    padding: 0.2em 1em;
    background: #E0E0E0;
}

article code{
    background: #F0F0F0;
    padding: 0 0.1em;
}

article .code-block{
    padding: 0.1em 0.5em;
    overflow-x: auto;
}

article a.index{
    display: block;
    text-decoration: none;
    text-align: center;
    font-size: 1.1em;
    background: #151515;
    border: 2px solid #151515;
    color: #FEFEFE;
}

article a.index:hover{
    background: #FEFEFE;
    color: #151515;
}</style><h1 id="mass-aggregate physics simulations">Mass-Aggregate Physics Simulations</h1><p>Mass-Aggregate, or also known as Particle or Verlet Physics are systems that govern a set of point particles, each with a specific mass. The particles then interact with each other through force generators.</p><p>Please see <a class="external-link" href="physics.html">physics systems</a> for a general overview of physics systems in Trial.</p><h2 id="particles">Particles</h2><p>A <code>particle</code> is a <code>physics-entity</code> and a <code>located-entity</code>. As discussed, it has no &quot;size&quot;, so there's no associated shape or primitive at all. By default, a Verlet integration scheme is used to update the particle state, which should be stable enough for most game uses.</p><p>Particles also implement <code>resolve-hit</code> and the associated <code>resolve-velocity</code> and <code>resolve-intersection</code> functions, responsible for resolving a contact between two particles. However, since particles have no size of their own, they cannot by themselves generate contacts.</p><h2 id="contact generation">Contact Generation</h2><p>Instead, the responsibility of contact generation falls onto the <code>hit-generator</code> which must simply implement the <code>generate-hits</code> function as described for the physics systems. The following set of contact generators is provided out of the box:</p><ul><li><p><code>particle-link</code><br>A mixin class for any contact generator between two particles <code>a</code> and <code>b</code>.</p></li><li><p><code>particle-cable</code><br>A particle cable is similar to a <code>bungee-force</code> wherein the two particles are prevented from separating farther than the <code>max-length</code>, invoking the <code>restitution</code> factor if exceeded.</p></li><li><p><code>particle-rod</code><br>And the rod is similar to a <code>spring-force</code> with a specific <code>distance</code> between the particles being enforced.</p></li></ul><h2 id="mass aggregate systems">Mass Aggregate Systems</h2><p>Finally, the <code>mass-aggregate-system</code> allows you to run a simulation with particles, using <code>hit-generators</code> for contact generation. Similar to forces and particles, you can add and remove generators with <code>enter</code> and <code>leave</code>.</p><p>Otherwise the mass aggregate system implements all the necessary functionality to generate and resolve contacts, and to integrate the simulation, so no special care has to be taken.</p><p>Note that this system uses an object per particle and per contact or force generator. This does not scale well to thousands let alone millions of objects. A special matrix-based solver would have to be written to handle such scales.</p></article></body></html>
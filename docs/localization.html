<article><style>article{
    max-width: 800px;
    font-size: 12pt;
    font-family: sans-serif;
    margin: 3em auto;
}

article h1{
    text-align: center;
    font-size: 2em;
}

article img{
    margin: 0 auto;
    max-width: 100%;
}

article blockquote{
    border-left: 0.2em solid gray;
    margin-left: 1em;
    padding-left: 1em;
}

article figcaption{
    padding: 0.2em 1em;
    background: #E0E0E0;
}

article code{
    background: #F0F0F0;
    padding: 0 0.1em;
}

article .code-block{
    padding: 0.1em 0.5em;
}</style><h1 id="localization and language">Localization and Language</h1><p>Trial includes a simple but effective localisation system. To use it, you should have a <code>lang</code> directory in your project root, and a subdirectory within for each language supported. The languages should follow the standard ISO 3-letter language codes.</p><p>Listing available languages works with <code>languages</code>, and a specific language can be loaded with <code>load-language</code>. A &quot;language&quot; itself is simply a hash table that typically associates symbols with strings of language-specific text.</p><p>You can access such an entry with <code>language-string</code>, or with the shorthand <code>@</code> macro. If your string needs interpolation, then it can be written as a format directive string, and interpolated with <code>@format</code> or <code>@formats</code>.</p><p>If you programmatically set <code>language-string</code>, you can serialise the table out via <code>save-language</code>. To react to changes to the language dictionary, whether by setting or via <code>load-language</code>, you can define a hook via <code>define-language-change-hook</code>.</p><p>Note that the values do not <em>have</em> to be strings. Sometimes it can be useful to stuff a list of choices under a single key, for instance. Trial's system does not care, and leaves it up to you to manage the data appropriately.</p><p>The base &quot;language&quot; is stored in each <code>language-dir</code> as a file called <code>strings.lisp</code>. The file is simply alternating keys and values:</p><code style="display:block" class="code-block" data-language="common lisp"><pre>player-name &quot;Yukari&quot;
city-name &quot;Tokyo&quot;</pre></code><p>etc. You may also of course store other language-specific files such as dialogue scripts and so forth in the language specific directory.</p><p>And that's pretty much all there is to it.</p></article>
<!DOCTYPE html><html><head><title>Trial / Time and Physics Steps</title><meta property="og:image" content="https://repository-images.githubusercontent.com/54314855/81c55af6-b2c4-45f0-b66d-f29fdd37be7f"><meta property="og:image:alt" content="Trial includes its own way to deal with physics updates and time passage separate from the rendering. This logic is typically handled by the render-loop class, which is a superclass of display (and thus main). The render-loop keeps a separate thread to perform physics steps and rendering, and to keep the main thread free to handle inputs and OS interactions."><meta property="og:type" content="object"><meta property="og:title" content="Trial / Time and Physics Steps"><meta property="og:url" content="https://shirakumo.org/docs/trial/time.mess.html"><meta property="og:description" content="Trial includes its own way to deal with physics updates and time passage separate from the rendering. This logic is typically handled by the render-loop class, which is a superclass of display (and thus main). The render-loop keeps a separate thread to perform physics steps and rendering, and to keep the main thread free to handle inputs and OS interactions."></head><body><article><a class="index" href="index.html">Index</a><style>article{max-width:800px;font-size:12pt;font-family:sans-serif;margin:0 auto 3em auto;}article h1{text-align:center;font-size:2em;}article img{margin:0 auto;max-width:100%;}article blockquote{border-left:0.2em solid gray;margin-left:1em;padding-left:1em;}article figcaption{padding:0.2em 1em;background:#E0E0E0;}article code{background:#F0F0F0;padding:0 0.1em;}article .code-block{padding:0.1em 0.5em;overflow-x:auto;}article a.index{display:block;text-decoration:none;text-align:center;font-size:1.1em;background:#151515;border:2px solid #151515;color:#FEFEFE;}article a.index:hover{background:#FEFEFE;color:#151515;}</style><h1 id="time and physics steps">Time and Physics Steps</h1><p>Trial includes its own way to deal with physics updates and time passage separate from the rendering. This logic is typically handled by the <code>render-loop</code> class, which is a superclass of <code>display</code> (and thus <code>main</code>). The <code>render-loop</code> keeps a separate thread to perform physics steps and rendering, and to keep the main thread free to handle inputs and OS interactions.</p><p>The <code>render-loop</code> will periodically call <code>update</code> on itself in a fixed time step, determined by <code>delta-time</code>, defaulting to 0.01s. This is suitable for physics updates. Despite the fact that the time step (<code>dt</code>) is kept fixed, you should nevertheless not rely on that, and instead only rely on the <code>dt</code> value for all your physics updates. This will make your code more robust and allow the implementation of features such as time slowdown or speedup. The <code>update</code> calls will typically happen in lock-step with real-time. If rendering causes things to slow down beyond real-time, <code>update</code> will be repeatedly called until physics have &quot;caught up&quot;, unless the delay is beyond ten seconds, in which case lost time is simply dropped.</p><p>The <code>render-loop</code> will also call <code>render</code> on itself as frequently as possible by default. You can force a frame limit using <code>target-framerate</code> (see <a class="external-link" href="settings.html">settings</a>), in which case a fast system will slow itself down automatically to avoid overuse of resources. Another way to restrict frame rate is to enable <code>vsync</code> on the <a class="external-link" href="context.html">context</a>, though it should be left up to the end user to choose whether to activate vsync or to impose a frame limit.</p><p>Typically with <code>main</code> the calls to <code>update</code> are translated to a <code>tick</code> event, which carries the associated information:</p><ul><li><p><code>tt</code> A double-float holding the total physics run-time so far.</p></li><li><p><code>dt</code> A single-float holding the period this update should advance physics by.</p></li><li><p><code>fc</code> An integer holding the count of updates so far.</p></li></ul><p>Every <code>update</code>, <a class="external-link" href="event-loop.html">events</a> are then issued and processed. This will cause the <code>tick</code> to be processed last, <em>after</em> any other pending events, though <em>before</em> any events issued during the event processing itself.</p></article></body></html>